# test_ehp

<h3>Using stack</h3>
python 3.7.9
django 1.11.17
psycopg2 2.9.5
Postgres 11.19
Bootstrap v5.0.2
windows10

<br>
Не удалось реализовать JSON (AJAX) обновление таблиц на клиенте, так что F5
<br>

<h3>Модели</h3>
У каждой модели в models.py есть 4 метода
(SQL RAW запросы в БД)
<br>
Подключение django к postgres через psycopg2
<ul>
  <li>add - добавление в базу</li>
  <li>all - взять все записи модели из таблицы</li>
  <li>del - удалить запись из таблицы</li>
  <li>update - обновить запись в таблице</li>
</ul>
<br>
services.py
<br>
Перед добавление / обновлением записи в БД она проверяется на уникальность
<br>
<h3> Представления view </h3>
<ul>
  <li>get - отправляет клиенту html шаблон и данные форм. Все формы и таблицы отправляются сразу и скрываются display: none;</li>
  <li>post - обработка JSON ответов от клиента. Проверяется на наличие ключа-значения 'add / upd / del' и по ним вызвывается нужный метод модели  
</ul>
Получив JSON ответ сервер, проверят значение "тип"/"заголовока" = 'add / upd / del', из JSON берет добавляемое/изменяемое значение
<br>
и проверяет его в services.py на уникальность, далее вызвается метод изменяемой модели и изменения заносятся в БД

<h3>JavaScript</h3>
<p> app.js</p>
<p>В начале описаны функции отображения/скрытия форм/таблиц display: none / block</p>
<br>
<b>send_json_to_server()</b>
<p>Отправляет данные из формы  добавления на сервер в JSON формате</p>
<b>del_row()</b>
<p>При нажатии кнопки "Удалить" Скрывает строку в таблице и отправляет запрос на удаление сервру</p>
<b> edit() </b>
<p>При нажатии кнопки "Изменить" Копирует данные и строки таблицы и заполняет ими форму для изменения</p>
<b> update() </b>
<p> Отправляет данные из формы изменения серверу, JSON'ом </p>

